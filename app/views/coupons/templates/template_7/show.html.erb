<% content_for :header do %>
  <style>
    .with-audio-button .coupon-header { background: transparent url('/images/preview/audio.png') no-repeat center center; background-color: #d9d9d9; background-size: 30%!important; }
    .with-audio-button .coupon-header.paused { background-image: url(/images/preview/audio_paused.png); }
  </style>
<% end %>

<div class="coupon with-audio-button">
  <div class="coupon-header" onclick="toggleAudio()">
  </div>
  <div class="header-title">
    <div class="coupon-title">
      <h3><%= @coupon.name %></h3>
    </div>
    <div class="clearfix"></div>
  </div>
  <div class="coupon-content">
    <h4><%= @coupon.title %></h4>
    <p><%= @coupon.description %></p>
  </div>
  <div class="coupon-button">
    <%= link_to @coupon.button_label, @coupon.button_link, class: %W[button],
          style: "background: ##{@coupon.button_background_color}; color: ##{@coupon.button_font_color};"
    %>
  </div>
</div>
<script type="text/javascript">
  var audio = new Audio('<%= @coupon.audio.url %>');
  audio.play();
  var couponHeader = document.getElementsByClassName("coupon-header")[0];
  var toggleAudio = function(){
    if(audio.paused){
      audio.play();
      couponHeader.classList.remove('paused');
    } else{
      audio.pause();
      couponHeader.classList.add('paused');
    }
  }
</script>